<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link href= "/lacnic-elecciones-pages/assets/images/favicon.png"  rel="shortcut icon" />

    <title>Sistema Elecciones</title>
    <link href="/lacnic-elecciones-pages/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/lacnic-elecciones-pages/assets/css/font-awesome/css/font-awesome.css" rel="stylesheet">
    
    <link href="/lacnic-elecciones-pages/assets/css/plugins/dataTables/datatables.min.css" rel="stylesheet">
    <link href="/lacnic-elecciones-pages/assets/css/animate.css" rel="stylesheet">
    <link href="/lacnic-elecciones-pages/assets/css/style.css" rel="stylesheet">
	  <link href="/lacnic-elecciones-pages/assets/css/plugins/iCheck/custom.css" rel="stylesheet"> 
    
    <link href="/lacnic-elecciones-pages/assets/css/styles.css" rel="stylesheet">  
    
    
    <script src="/lacnic-elecciones-pages/assets/js/jquery-3.2.1.min.js"></script>
	  <script src="/lacnic-elecciones-pages/assets/js/bootstrap.min.js"></script>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Sistema Elecciones</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Sistema Elecciones" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/lacnic-elecciones-pages/" />
<meta property="og:url" content="http://localhost:4000/lacnic-elecciones-pages/" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Sistema Elecciones" />
<script type="application/ld+json">
{"@type":"WebSite","url":"http://localhost:4000/lacnic-elecciones-pages/","headline":"Sistema Elecciones","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body class="top-navigation pace-done">
    <div id="wrapper">
      
      <div id="page-wrapper" class="gray-bg">  
        <div id="topBarPublico">  
  <div class="row border-bottom white-bg">
    <nav class="navbar navbar-static-top" role="navigation">
			<div class="navbar-header">
        <button class="btn btn-primary btn-min-width" type="button" onclick="location.href='http://elecciones-demo.lacnic.net.uy/elecciones';" style="border-radius: 0px" >
					<img alt="image" class="img" src="/lacnic-elecciones-pages/assets/images/logo.png"> Sistema de Elecciones - LACNIC
				</button>
      </div>
      <div class="navbar-collapse collapse" id="navbar">
				<ul class="nav navbar-top-links navbar-right">
					<li>
						<a href=http://elecciones-demo.lacnic.net.uy/elecciones id="login">
							<i class="fa fa-home"></i>
							Sistema de Elecciones
						</a>
					</li>
				</ul>	
				
			</div>    
    </nav>
  </div>     
</div>
       
        <div style="padding: 1%">        
          <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-title">
				<h1>Requisitos y Configuración</h1>
			</div>
			<div class="ibox-content">
				<p class="paragraph">A continuación se detallan los pasos y requisitos para instalar y configurar el Sistema de Elecciones.</p>
				<ol class="paragraph vertical-space">
					<li><a href="#requerimientos">Requerimientos</a></li>
					<li><a href="#automatico">Armado automático del ambiente</a></li>
					<li><a href="#manual">Armado manual del ambiente</a></li>
					<li><a href="#maven">Configuración y empaquetado con Maven</a></li>
					<li><a href="#cicd">Flujo Integración Continua</a></li>
					<li><a href="#confini">Configuración Inicial</a></li>
				</ol>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-title">
				<h2 id="requerimientos">Requerimientos</h2>
			</div>
			<div class="ibox-content">
				<p class="paragraph">El Sistema de Elecciones está desarrollado en Java con el framework web Wicket de Apache.</p>
				<p class="paragraph">Es necesario un ambiente de ejecución con los siguientes productos:</p>
				<ul class="paragraph vertical-space">
					<li>Java 8</li>
					<li>Wildfly 20.0.1</li>
					<li>PostgreSQL 12</li>
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-title">
				<h2 id="automatico">Armado automático del ambiente</h2>
			</div>
			<div class="ibox-content">
				<p class="paragraph">Se provee el role <code>elecciones</code> de Ansible para el armado automático del ambiente sobre Ubuntu Server, que puede encontrarse en el repositorio del proyecto <a href="https://github.com/LACNIC/elecciones/tree/master/ansible">aquí</a>.</p>
				<p class="paragraph">Hay 3 playbooks disponibles para ejecutar:</p>
				<ul class="paragraph">
					<li>Provisionamiento del ambiente completo: <code>install.yaml</code></li>
					<li>Deploy de los artefactos del Sistema: <code>deploy.yaml</code></li>
					<li>Restore de dump de base de datos: <code>restore-dump.yaml</code></li>
				</ul>
				<p class="paragraph">Ejecución de playbooks</p>
				<ul class="paragraph vertical-space">
					<li>Provisionamiento del ambiente completo: <code>ansible-playbook install.yaml -i hosts -l &lt;servidor&gt; -u &lt;usuario&gt;</code></li>
					<li>Deploy de los artefactos del Sistema: <code>ansible-playbook deploy.yaml -i hosts -l &lt;servidor&gt; -u &lt;usuario&gt;</code></li>
					<li>Restore de dump de base de datos: <code>ansible-playbook restore-dump.yaml -i hosts -l &lt;servidor&gt; -u &lt;usuario&gt;</code></li>
				</ul>
				<p class="paragraph">Por dudas sobre la implementación y/o ejecución de estas tareas, puede consultar la <a href="https://docs.ansible.com/ansible/2.5">documentación de Ansible</a>.</p>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-title">
				<h2 id="manual">Armado manual del ambiente</h2>
			</div>
			<div class="ibox-content">
				<p class="paragraph">Se deben instalar los productos requeridos para la ejecución del sistema, <a href="#requerimientos">detallados anteriormente</a>. El procedimiento dependerá del sistema operativo usado. Una vez instalados, se deben ejecutar los siguientes pasos de configuración.</p>

				<h3 class="titulo-h3" id="manual">Inicialización de base de datos</h3>
				<p class="paragraph" >Se provee un dump de base de datos con los datos mínimos para la ejecución del sistema <a href="https://github.com/LACNIC/elecciones/tree/master/config/dbdriver">aquí</a>.</p>

				<h3 class="titulo-h3" id="manual">Configuración de Wildfly</h3>

				<h4 class="titulo-h4">Librerías</h4>
				<p class="paragraph">Es necesario instalar en Wildfly las siguientes librerías:</p>
				<ul class="paragraph">
					<li><code>ipresource</code></li>
					<li><code>jxl</code></li>
					<li><code>commons-validator</code></li>
				</ul>
				<p class="paragraph">Se proveen en el repositorio del proyecto <a href="https://github.com/LACNIC/elecciones/tree/master/config/modules">aquí</a>.</p>
				<p class="paragraph">Para instalarlas, copiarlas al directorio <code>$WILDFLY_HOME/modules</code> de su instalación.</p>

				<h4 class="titulo-h4">Driver PostgreSQL</h4>
				<p class="paragraph">Es necesario publicar en Wildfly el driver JDBC de PostgreSQL, provisto en el repositorio del proyecto <a href="https://github.com/LACNIC/elecciones/tree/master/config/dbdriver">aquí</a>.</p>
				<p class="paragraph">Para publicarlo, copiar el archivo al directorio <code>$WILDFLY_HOME/standalone/deployments</code> de su instalación.</p>

				<h4 class="titulo-h4">Datasource</h4>
				<p class="paragraph">Se debe configurar el datasource para el acceso a la base de datos. Se provee un datasource ejemplo en el repositorio del proyecto <a href="https://github.com/LACNIC/elecciones/tree/master/config/datasource">aquí</a>.</p>
				<p class="paragraph">Para configurarlo, agregarlo en la sección <code>&lt;datasources&gt;</code> del archivo de configuración <code>$WILDFLY_HOME/standalone/configuration/standalone.xml</code> de su instalación.</p>
				
				<h4 class="titulo-h4">Usuario administrativo</h4>
				<p class="paragraph">En caso de querer usar la funcionalidad de deploy de Maven, es necesario crear un usuario administrativo en Wildfly.</p>
				<p class="paragraph">Para esto, ejecutar el script <code>add-user.bat</code>/<code>add-user.sh</code> en el directorio <code>$WILDFLY_HOME/bin</code> de su instalación.</p>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-title">
				<h2 id="maven">Configuración y empaquetado con Maven</h2>
			</div>
			<div class="ibox-content">
				<p class="paragraph">Se usa Maven 3.6 para la configuración, empaquetado y publicación de los proyectos del Sistema:</p>
				<ul class="paragraph">
					<li>Empaquetado: <code>mvn clean install</code></li>
					<li>Publicación: <code>mvn wildfly:deploy-only -Dwildfly.id=&lt;id-servidor&gt; -Dwildfly.hostname=&lt;hostname-o-ip-servidor&gt; -Dwildfly.port=&lt;puerto-admin-wildfly&gt;</code></li>
				</ul>
				<p class="paragraph">El parámetro <code>&lt;id-servidor&gt;</code> refiere al servidor configurado en el archivo <code>settings.xml</code> de su instalación de Maven.</p>
				<p class="paragraph">Por dudas sobre la configuración de los proyectos y/o la ejecución de las tareas Maven, puede consultar la <a href="https://maven.apache.org/docs/3.6.3/release-notes.html">documentación de Maven y sus plugins</a>.</p>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-title">
				<h2 id="cicd">Flujo Integración Continua</h2>
			</div>
			<div class="ibox-content">
				<p class="paragraph">
					Se configuraron en el repositorio Git un flujos de integración continua hacia el ambiente de test y prod. Los mismos se encuentran definidos en el directorio <code>.github/workflows</code>
					. Las acciones que gatillan los flujos son la realización de "push"
					en las siguientes ramas:
				</p>
				<ul class="paragraph">
					<li>develop (test)</li>
					<li>master (prod)</li>
				</ul>
				<p class="paragraph">En ambos casos el flujo consiste en dos acciones:</p>
				<ul class="paragraph">
					<li>Build: baja el código y ejecuta un <code>mvn clean install</code></li>
					<li>Deploy: obtiene los artefactos generados y realiza un deploy en el servidor indicado medianet un <code>mvn wildfly:deploy-only</code></li>
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-title">
				<h2 id="confini">Configuración Inicial</h2>
			</div>
			<div class="ibox-content">
				<p class="paragraph">
					Para realizar la configuración inicial del aplicativo una vez instalado, referirse al siguiente <a href='assets/images/EleccionesConfiguracionInicial.pdf' target="_blank">documento</a>.
				</p>
			</div>
		</div>
	</div>
</div>

          </div>  
          <footer class="footer">
  <div class="col-md-6">
    <strong>LACNIC</strong> 2020
  </div>
  <div class="col-md-6">
    <a target="_blank" style="float: right;" href="https://www.lacnic.net/politica-privacidad">
      Política de privacidad
    </a>
  </div>  
</footer>
        </div>        
      </div>     
    </div>
  </body>
</html>
